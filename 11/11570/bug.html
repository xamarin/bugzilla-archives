<html lang="en"><head>
    <title>11570 – System.IO.IOException: BeginWrite in HttpWebRequest when connecting to encrypted server</title>

      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<style>/* js/yui/assets/skins/sam/autocomplete.css */
.yui-skin-sam .yui-ac{position:relative;font-family:arial;font-size:100%}.yui-skin-sam .yui-ac-input{position:absolute;width:100%}.yui-skin-sam .yui-ac-container{position:absolute;top:1.6em;width:100%}.yui-skin-sam .yui-ac-content{position:absolute;width:100%;border:1px solid #808080;background:#fff;overflow:hidden;z-index:9050}.yui-skin-sam .yui-ac-shadow{position:absolute;margin:.3em;width:100%;background:#000;-moz-opacity:.10;opacity:.10;filter:alpha(opacity=10);z-index:9049}.yui-skin-sam .yui-ac iframe{opacity:0;filter:alpha(opacity=0);padding-right:.3em;padding-bottom:.3em}.yui-skin-sam .yui-ac-content ul{margin:0;padding:0;width:100%}.yui-skin-sam .yui-ac-content li{margin:0;padding:2px 5px;cursor:default;white-space:nowrap;list-style:none;zoom:1}.yui-skin-sam .yui-ac-content li.yui-ac-prehighlight{background:#b3d4ff}.yui-skin-sam .yui-ac-content li.yui-ac-highlight{background:#426fd9;color:#FFF}
/* js/yui/assets/skins/sam/calendar.css */
.yui-calcontainer{position:relative;float:left;_overflow:hidden}.yui-calcontainer iframe{position:absolute;border:0;margin:0;padding:0;z-index:0;width:100%;height:100%;left:0;top:0}.yui-calcontainer iframe.fixedsize{width:50em;height:50em;top:-1px;left:-1px}.yui-calcontainer.multi .groupcal{z-index:1;float:left;position:relative}.yui-calcontainer .title{position:relative;z-index:1}.yui-calcontainer .close-icon{position:absolute;z-index:1;text-indent:-10000em;overflow:hidden}.yui-calendar{position:relative}.yui-calendar .calnavleft{position:absolute;z-index:1;text-indent:-10000em;overflow:hidden}.yui-calendar .calnavright{position:absolute;z-index:1;text-indent:-10000em;overflow:hidden}.yui-calendar .calheader{position:relative;width:100%;text-align:center}.yui-calcontainer .yui-cal-nav-mask{position:absolute;z-index:2;margin:0;padding:0;width:100%;height:100%;_width:0;_height:0;left:0;top:0;display:none}.yui-calcontainer .yui-cal-nav{position:absolute;z-index:3;top:0;display:none}.yui-calcontainer .yui-cal-nav .yui-cal-nav-btn{display:-moz-inline-box;display:inline-block}.yui-calcontainer .yui-cal-nav .yui-cal-nav-btn button{display:block;*display:inline-block;*overflow:visible;border:0;background-color:transparent;cursor:pointer}.yui-calendar .calbody a:hover{background:inherit}p#clear{clear:left;padding-top:10px}.yui-skin-sam .yui-calcontainer{background-color:#f2f2f2;border:1px solid #808080;padding:10px}.yui-skin-sam .yui-calcontainer.multi{padding:0 5px 0 5px}.yui-skin-sam .yui-calcontainer.multi .groupcal{background-color:transparent;border:0;padding:10px 5px 10px 5px;margin:0}.yui-skin-sam .yui-calcontainer .title{background:url(../../js/yui/assets/skins/sam/sprite.png) repeat-x 0 0;border-bottom:1px solid #ccc;font:100% sans-serif;color:#000;font-weight:bold;height:auto;padding:.4em;margin:0 -10px 10px -10px;top:0;left:0;text-align:left}.yui-skin-sam .yui-calcontainer.multi .title{margin:0 -5px 0 -5px}.yui-skin-sam .yui-calcontainer.withtitle{padding-top:0}.yui-skin-sam .yui-calcontainer .calclose{background:url(../../js/yui/assets/skins/sam/sprite.png) no-repeat 0 -300px;width:25px;height:15px;top:.4em;right:.4em;cursor:pointer}.yui-skin-sam .yui-calendar{border-spacing:0;border-collapse:collapse;font:100% sans-serif;text-align:center;margin:0}.yui-skin-sam .yui-calendar .calhead{background:transparent;border:0;vertical-align:middle;padding:0}.yui-skin-sam .yui-calendar .calheader{background:transparent;font-weight:bold;padding:0 0 .6em 0;text-align:center}.yui-skin-sam .yui-calendar .calheader img{border:0}.yui-skin-sam .yui-calendar .calnavleft{background:url(../../js/yui/assets/skins/sam/sprite.png) no-repeat 0 -450px;width:25px;height:15px;top:0;bottom:0;left:-10px;margin-left:.4em;cursor:pointer}.yui-skin-sam .yui-calendar .calnavright{background:url(../../js/yui/assets/skins/sam/sprite.png) no-repeat 0 -500px;width:25px;height:15px;top:0;bottom:0;right:-10px;margin-right:.4em;cursor:pointer}.yui-skin-sam .yui-calendar .calweekdayrow{height:2em}.yui-skin-sam .yui-calendar .calweekdayrow th{padding:0;border:0}.yui-skin-sam .yui-calendar .calweekdaycell{color:#000;font-weight:bold;text-align:center;width:2em}.yui-skin-sam .yui-calendar .calfoot{background-color:#f2f2f2}.yui-skin-sam .yui-calendar .calrowhead,.yui-skin-sam .yui-calendar .calrowfoot{color:#a6a6a6;font-size:85%;font-style:normal;font-weight:normal;border:0}.yui-skin-sam .yui-calendar .calrowhead{text-align:right;padding:0 2px 0 0}.yui-skin-sam .yui-calendar .calrowfoot{text-align:left;padding:0 0 0 2px}.yui-skin-sam .yui-calendar td.calcell{border:1px solid #ccc;background:#fff;padding:1px;height:1.6em;line-height:1.6em;text-align:center;white-space:nowrap}.yui-skin-sam .yui-calendar td.calcell a{color:#06c;display:block;height:100%;text-decoration:none}.yui-skin-sam .yui-calendar td.calcell.today{background-color:#000}.yui-skin-sam .yui-calendar td.calcell.today a{background-color:#fff}.yui-skin-sam .yui-calendar td.calcell.oom{background-color:#ccc;color:#a6a6a6;cursor:default}.yui-skin-sam .yui-calendar td.calcell.oom a{color:#a6a6a6}.yui-skin-sam .yui-calendar td.calcell.selected{background-color:#fff;color:#000}.yui-skin-sam .yui-calendar td.calcell.selected a{background-color:#b3d4ff;color:#000}.yui-skin-sam .yui-calendar td.calcell.calcellhover{background-color:#426fd9;color:#fff;cursor:pointer}.yui-skin-sam .yui-calendar td.calcell.calcellhover a{background-color:#426fd9;color:#fff}.yui-skin-sam .yui-calendar td.calcell.previous{color:#e0e0e0}.yui-skin-sam .yui-calendar td.calcell.restricted{text-decoration:line-through}.yui-skin-sam .yui-calendar td.calcell.highlight1{background-color:#cf9}.yui-skin-sam .yui-calendar td.calcell.highlight2{background-color:#9cf}.yui-skin-sam .yui-calendar td.calcell.highlight3{background-color:#fcc}.yui-skin-sam .yui-calendar td.calcell.highlight4{background-color:#cf9}.yui-skin-sam .yui-calendar a.calnav{border:1px solid #f2f2f2;padding:0 4px;text-decoration:none;color:#000;zoom:1}.yui-skin-sam .yui-calendar a.calnav:hover{background:url(../../js/yui/assets/skins/sam/sprite.png) repeat-x 0 0;border-color:#a0a0a0;cursor:pointer}.yui-skin-sam .yui-calcontainer .yui-cal-nav-mask{background-color:#000;opacity:.25;filter:alpha(opacity=25)}.yui-skin-sam .yui-calcontainer .yui-cal-nav{font-family:arial,helvetica,clean,sans-serif;font-size:93%;border:1px solid #808080;left:50%;margin-left:-7em;width:14em;padding:0;top:2.5em;background-color:#f2f2f2}.yui-skin-sam .yui-calcontainer.withtitle .yui-cal-nav{top:4.5em}.yui-skin-sam .yui-calcontainer.multi .yui-cal-nav{width:16em;margin-left:-8em}.yui-skin-sam .yui-calcontainer .yui-cal-nav-y,.yui-skin-sam .yui-calcontainer .yui-cal-nav-m,.yui-skin-sam .yui-calcontainer .yui-cal-nav-b{padding:5px 10px 5px 10px}.yui-skin-sam .yui-calcontainer .yui-cal-nav-b{text-align:center}.yui-skin-sam .yui-calcontainer .yui-cal-nav-e{margin-top:5px;padding:5px;background-color:#edf5ff;border-top:1px solid black;display:none}.yui-skin-sam .yui-calcontainer .yui-cal-nav label{display:block;font-weight:bold}.yui-skin-sam .yui-calcontainer .yui-cal-nav-mc{width:100%;_width:auto}.yui-skin-sam .yui-calcontainer .yui-cal-nav-y input.yui-invalid{background-color:#ffee69;border:1px solid #000}.yui-skin-sam .yui-calcontainer .yui-cal-nav-yc{width:4em}.yui-skin-sam .yui-calcontainer .yui-cal-nav .yui-cal-nav-btn{border:1px solid #808080;background:url(../../js/yui/assets/skins/sam/sprite.png) repeat-x 0 0;background-color:#ccc;margin:auto .15em}.yui-skin-sam .yui-calcontainer .yui-cal-nav .yui-cal-nav-btn button{padding:0 8px;font-size:93%;line-height:2;*line-height:1.7;min-height:2em;*min-height:auto;color:#000}.yui-skin-sam .yui-calcontainer .yui-cal-nav .yui-cal-nav-btn.yui-default{border:1px solid #304369;background-color:#426fd9;background:url(../../js/yui/assets/skins/sam/sprite.png) repeat-x 0 -1400px}.yui-skin-sam .yui-calcontainer .yui-cal-nav .yui-cal-nav-btn.yui-default button{color:#fff}
/* skins/standard/global.css */
body {font-family: sans-serif;color: #000;background: #fff url(../../skins/standard/global/body-back.gif) repeat-x;}body, td, th, input, dt, #titles {font-family: Verdana, sans-serif;font-size: small;}pre, code, kbd {font-size: medium;}#bugzilla-body {clear: both;}#bugzilla-body th {font-weight: bold;vertical-align: top;}#header {margin-bottom: 1em;}#header form, #header form input,#footer form, #footer form input{font-size: 95%;display: inline;}#header .links {border-left: 1px solid #747E93;border-right: 1px solid #747E93;border-bottom: 1px solid #747E93;border-bottom-left-radius: 5px;border-bottom-right-radius: 5px;padding: 0.5em;}#lang_links_container {float: right;white-space: nowrap;}#lang_links_container .links {border: none;padding: .5em;}.lang_current {font-weight: bold;}#message {border: 1px solid red;margin: 0.3em 0em;padding: 0.3em;color: green;}form.mini_login input.bz_login  {width: 10em;}form.mini_login input.bz_password {width: 6em;}form.mini_login input.bz_remember {margin: 0;}#banner {}#titles {width: 100%;background-color: #404D6C;color: #fff;border-top-left-radius: 5px;border-top-right-radius: 5px;margin: 0;vertical-align: bottom;display: table;}#titles a {color: #fff;}#titles p {margin: 0;padding: 0;}#titles #title {font-weight: bold;padding: 0.5em;white-space: nowrap;display: table-cell;}#titles #subtitle {font-weight: normal;text-align: center;padding: 0.5em;display: table-cell;}#titles #information {font-weight: normal;text-align: right;font-size: 90%;padding: 0.5em;white-space: nowrap;display: table-cell;}#footer {clear: both;margin-top: 1em;width: 100%;background: #edf2f2;border-top: 1px solid #ddd;border-bottom: 1px solid #ddd;}#footer #useful-links {padding-left: 1ex;padding-right: 1ex;}#footer ul {list-style-type: none;}#links-saved ul {display: inline;}#links-saved th {vertical-align: top;}#footer .label {white-space: nowrap;vertical-align: top;}#footer .links {vertical-align: top;}ul.links {margin: 0;padding: 0;list-style-type: none;}ul.links li {display: inline;white-space: nowrap;}table.tabs {width: 100%;}.tabs th, .tabs td {padding: 1em;}.tabs td {background: #eee;text-align: center;border-style: solid;border-color: black;border-width: 0px 0px 2px 0px;}.tabs td.selected {background: white;border-width: 2px 2px 0px 2px;}.tabs td.spacer {background: white;}a {color: #039;}a:visited {color: #636;}a:hover {color: #333;}a:active {color: #000;}.clickable_area {cursor: pointer;}textarea {font-family: monospace;}a.controller {font-size: 115%;}div#docslinks {float: right;border: 1px solid black;padding: 1ex;font-size: 80%;}#docslinks h2 {margin: 0;}.rss {background: transparent url(../../skins/standard/../../images/rss_small.png) no-repeat;padding-left: 16px;line-height: 1.5em;}.bz_bug_link {}.bz_bug_link.bz_status_UNCONFIRMED {font-style: italic;}.bz_obsolete {text-decoration: line-through;}.bz_inactive {text-decoration: line-through;}.bz_closed,.bz_CLOSED td {text-decoration: line-through;}.bz_private {color: darkred;background: #f3eeee;}.bz_disabled {color: #a0a0a0;}.bz_comment_table td {vertical-align: top;}.bz_comment {margin-bottom: 2em;}.bz_comment_text, .uneditable_textarea, tbody.file pre {font-family: monospace;white-space: pre-wrap;}.bz_comment_text {width: 50em;}.bz_comment_text span.quote {color: #65379c;white-space: pre;overflow: auto;display: block;}.bz_comment_user, .bz_comment_time, .bz_comment_number,.bz_private_checkbox, .bz_comment_actions{margin: 0 .5em;}.bz_comment_actions, .bz_comment_number, .bz_private_checkbox {float: right;}.bz_collapse_expand_comments {padding: 0;margin: 0 0 0 1em;list-style-type: none;}.bz_collapse_expand_comments li {margin-bottom: .5em;}.bz_collapse_comment {text-decoration: none;}.bz_private_checkbox input {margin: 0;vertical-align: middle;}.bz_comment_head, .bz_first_comment_head {padding-top: .1em;padding-bottom: .1em;padding-left: .5em;background-color: #e0e0e0;}.bz_comment_user_images img {vertical-align: bottom;}.bz_comment_hilite pre {background-color: lightgreen;margin: 0;padding: 1em 0;}.bz_comment_collapse_reason,.bz_default_collapsed .bz_comment_number {font-weight: normal;}.bz_default_hidden, .bz_tui_hidden, .bz_hidden_field, .bz_hidden_option {display: none !important;}table#flags th,table#flags td {vertical-align: middle;text-align: left;}#email_prefs, #saved_search_prefs, #shared_search_prefs,#bug_activity {border: 1px solid black;border-collapse: collapse;}#email_prefs th,#shared_search_prefs th,#saved_search_prefs th {text-align: center;}#email_prefs th, #email_prefs td,#shared_search_prefs th, #shared_search_prefs td,#saved_search_prefs th, #saved_search_prefs td,#bug_activity td {border: 1px solid;padding: 0.3em;}#email_prefs th.role_header {width: 10%;}#bug_activity td {vertical-align: top;}#user_prefs th, #user_prefs td {padding: 0.5em;}#permissions {margin-left: auto;margin-right: auto;width: 40em;}#permissions p {margin-top: 2em;margin-bottom: 0.5em;}#permissions li {list-style-type: none;}#permissions table td {vertical-align: top;}.column_header {background-color: #66f;}.column_header th {text-align: center;}.flag_select {min-width: 3em;}input.requestee {width: 15em;}#error_msg {font-size: x-large;}#post_err_msg, form#check {clear: both;}.warning {color: red;}.throw_error {background-color: red;color: black;font-size: 120%;margin-bottom: 2em;padding: 0.5em 1em;float: left;}.label {font-weight: bold;}.throw_error a:visited {color: darkblue ;}dt {font-weight: bold;}body > dl > dt {border-top: dotted gray thin;}dl dl > dt {border-top: none;}.arrow_button {font-size: 150%;}#attachment_table {border-collapse: collapse;border: 1px solid #333333;}#attachment_table th, .bz_attach_footer, .bz_time_tracking_table th,.dependency_tree_controls {background-color: #E0E0E0;color: black;}#attachment_table td, .bz_time_tracking_table th, .bz_time_tracking_table td {border: 1px solid #333333;}#attachment_table th, #attachment_table td {padding: 0.3em;}.bz_attach_extra_info, .bz_info {font-size: smaller;}.bz_attach_flags, .bz_attach_footer, .bz_flags, .nowrap {white-space: nowrap;}.bz_attach_view_hide {float: right;padding-left: 1em;}#user_match_table {border-collapse: collapse;}#user_match_table td {vertical-align: top;border-bottom: 1px solid black;padding: 1em 0.5em;}div.user_match {margin-bottom: 1em;}.indented {margin-left: 3em;}.box {border: 1px solid black;color: black;background-color: #ffc;margin: 1em;padding: 0.5em 1em;}.collapsed,.bz_default_collapsed .bz_private_checkbox,.bz_default_collapsed .bz_comment_user,.bz_default_collapsed .bz_comment_user_images,.bz_default_collapsed .bz_comment_time,.bz_default_collapsed .bz_comment_tags,.bz_default_collapsed .bz_comment_text,.bz_default_collapsed .bz_collapsed_actions{display: none;}#serverpush_msg {margin-top: 20%;text-align: center;font-size: xx-large;}@media print {#header, #footer {display: none;}div.bz_query_buttons {display: none;}body {background-image: none;background-color: #fff;}}.field_label {text-align: right;vertical-align: top;font-weight: bold;}.field_help_link {cursor: help;}.field_value, form#Create th, form#Create td, .top {vertical-align: top;}.bottom {vertical-align: bottom;}.field_value .text_input {width: 100%;min-width: 25em;}.uneditable_textarea {max-width: 30em;font-size: medium;}th.required:before {content: "* ";}th.required:before, span.required_star {color: red;}input.required, select.required, span.required_explanation {background-color: #fff7cd;color: #000;}.calendar_button {background: transparent url(../../skins/standard/global/calendar.png) no-repeat;width: 20px;height: 20px;vertical-align: middle;}.calendar_button span { display: none }.yui-calcontainer {display: none;background-color: white;padding: 10px;border: 1px solid #404D6C;}.bug_urls {margin: 0;padding: 0;list-style-type: none;}pre.field_textarea_readonly {margin: 2px;padding: 4px;overflow: auto;float: left;max-width: 30em;max-height: 7em;border: 1px solid #CCC;font-family: monospace;white-space: pre-wrap;}.yui-skin-sam .yui-ac-input { position:static !important;vertical-align:middle !important; }.yui-skin-sam .yui-ac-container { left:0px !important; }.yui-skin-sam .yui-ac { display: inline-block; }#bugzilla-body .yui-ac-content {max-height: 19em;overflow: auto;overflow-x: hidden;}#keywords_container {padding-top: .2em;}#keywords_container .yui-ac-content {margin-left: -1px;}#comment_tabs {border-spacing: 0;}.comment_tab {display: table-cell;border: 1px solid silver;padding: 2px 1em;cursor: pointer;background: transparent;}.active_comment_tab {background: #fff;font-weight: bold;}#comment_preview {border: 1px solid silver;padding: 1px;overflow: auto;margin: 0px;}#comment_preview_text {margin: 0px;width: auto;}#comment_preview_loading {font-style: italic;}#comment {margin: 0px 0px 1em 0px;}.validation_error_text {font-size: 120%;color: #B70000;font-weight: bold;}.validation_error_field, input.validation_error_field {border: 2px solid #B70000;background-color: #FFEBEB;}form th {text-align: right;}.left {text-align: left;}.center {text-align: center;}.right {text-align: right;}.middle {vertical-align: middle;}.inline {display: inline;}tr.shared_search {background-color: #fff7cd;color: #000;}.multi-columns {columns: 3;-moz-columns: 3;-webkit-columns: 3;}#page-index {padding: 0.2em 0.2em 0.15em 0.2em;max-width: 1000px;}.intro, .outro {text-align: center;}#new_release {border: 2px solid red;padding: 0.5em 1em;margin: 1em;font-weight: bold;}#new_release .notice {font-size: 80%;font-weight: normal;}#welcome-admin a {font-weight: bold;}.bz_common_actions {text-align: center;}.bz_common_actions ul {list-style-type: none;padding: 0;}.bz_common_actions ul li {display: inline;vertical-align: top;}.bz_common_actions ul li a {display: inline-block;height: 170px;width: 145px;margin: 0 2ex 2em 0;}.bz_common_actions ul li a span {position: relative;top: 90%;font-weight: bold;}.bz_common_actions a,.bz_common_actions a:visited,.bz_common_actions a:hover {text-decoration: none;}#enter_bug { background: url(../../skins/standard/index/file-a-bug.png)  no-repeat; }#query     { background: url(../../skins/standard/index/search.png)      no-repeat; }#account   { background: url(../../skins/standard/index/new-account.png) no-repeat; }#help      { background: url(../../skins/standard/index/help.png)        no-repeat; }#quicksearchForm {clear: both;text-align: center;margin-bottom: 2em;}#quicksearchForm #quicksearch_main {width: 27em;}#quicksearchForm {margin: 0;padding: 0;}#page-index table {border-collapse: collapse;margin: auto;}#welcome {font-size: x-large;font-weight: bold;text-align: center;margin: 0 0 0.8em 0;padding: 0;}#common_queries ul {list-style: none;padding-left: 1.5em;}#common_queries li a {text-decoration: none;}ul#quicksearch_links {margin-bottom: 1em;}ul.additional_links {list-style: none;margin: 0;padding: 0;}ul.additional_links li {display: inline;}ul.additional_links li.bz_default_hidden {display: none;}body.narrow_page #bugzilla-body > * {max-width: 45em;}.req_new {color: red;}.req_table {border-collapse: collapse;}.req_table td, .req_table th {border: 1px solid black;padding: .25em;}.qs_help li {margin-top: 1ex;}.qs_fields th {padding: 0 .25em;}.qs_fields th.field_nickname {text-align: left;}.qs_fields td {padding: .25em;border-top: 1px solid gray;}.qs_fields .field_name {width: 10em;}table.field_value_explanation {table-layout: fixed;border-collapse: collapse;}.field_value_explanation thead h2 {margin: 0;}.field_value_explanation .header_row td {text-align: center;font-size: 120%;font-weight: bold;}.field_value_explanation tbody td {border: 1px solid black;padding: 1em;}.field_value_explanation dt, .field_descriptions dt {margin-top: 1em;}.field_descriptions dt {font-size: 120%;}#duplicates_table {border-collapse: collapse;}#duplicates_table .resolved {background-color: #d9d9d9;color: black;}#duplicates_table thead tr {background-color: #ccc;color: black;}#duplicates_table thead tr th {vertical-align: middle;}#duplicates_table td, #duplicates_table th {border: 1px solid black;padding: .1em .25em;}#duplicates_table tbody td {text-align: center;}#duplicates_table tbody td.short_desc {text-align: left;}
/* skins/standard/bug.css */
.enter_bug_form table {border-spacing: 0;border-width: 0;}.enter_bug_form td, .enter_bug_form th {padding: .25em;}.enter_bug_form th {text-align: right;}#Create #field_container_component {width: 1px;}#Create #field_container_reporter {width: 100%;}#Create .comment, #guided_form #description {vertical-align: top;overflow: auto;color: green;}#guided_form #description {display: inline;margin-left: 10px;}#Create #comp_desc_container td {padding: 0;}#Create #comp_desc {height: 11ex;}#Create #os_guess_note {padding-top: 0;}#Create #os_guess_note div {max-width: 35em;}#Create .field_value .text_input {max-width: 50em;}#possible_duplicates th {text-align: center;background: none;border-collapse: collapse;}#possible_duplicates td {vertical-align: middle;}#possible_duplicates .yui-dt-col-update_token {white-space: nowrap;}table#flags th, table#flags td,table#bug_flags th, table#bug_flags td,table#attachment_flags th, table#attachment_flags td {text-align: left;vertical-align: baseline;font-size: small;}.guided_form_field {background-color: #ffc;}#somebugs {width: 100%;height: 500px;}.good {color: #090;}.bad {color: #900;}.bz_short_desc_container {margin: 8px 0;padding: 0.3em;background-color: rgb(208, 208, 208);border-radius: 0.5em;font-size: 125%;font-weight: bold;}.bz_bug .edit_form {width: 100%;}.bz_bug .edit_form table {width: 100%;}.bz_bug #alias {min-width: 0;width: 10em;}table#flags {width: auto;}.bz_column_spacer {width: 0.5em;}.related_actions {font-size: 0.85em;float: right;list-style-type: none;white-space: nowrap;margin: 0;padding: 0;}.related_actions li {display: inline;}.navigation_link {color: #777;font-style: italic;}.bz_show_bug_column {vertical-align: top;}.bz_section_spacer {height: 1em;}#duplicate_settings {white-space: nowrap;}#bz_big_form_parts td {vertical-align: top;}.bz_group_visibility_section {margin-left: 1em;}.bz_group_visibility_section .instructions {font-style: italic;}#bz_restrict_group_visibility_help .instructions {margin-top: 0;}#bz_enable_role_visibility_help {margin-top: 1em;}.bz_time_tracking_table {border-collapse: collapse;}.bz_time_tracking_table th {text-align: center;}.bz_time_tracking_table td {text-align: center;}.bz_time_tracking_table th,.bz_time_tracking_table td {padding: 4px;}.bz_time_tracking_table .bz_summarize_time {text-align: right;}.bz_time_tracking_table #deadline {width: 7em;}#summary tr td {vertical-align:top;}#status {margin-bottom: 3ex;}.knob-buttons {float: right;}.text_input, .bz_userfield, #keywords_container, #tag_container {width: 100%;}.bz_bug .bz_short_desc_container {width: inherit;}.bz_comment_tags {margin-top: 3px;}.bz_comment_tag {border: 1px solid #c8c8ba;padding: 1px 3px;margin-right: 2px;border-radius: 0.5em;background-color: #eee;color: #000;}#bz_ctag_div {display: inline-block;}#bz_ctag_error {border: 1px solid #ff6666;padding: 0px 2px;border-radius: 0.5em;margin: 2px;display: inline-block;}#comment_tags_collapse_expand_container {padding-top: 1em;}#comment_tags_collapse_expand {list-style-type: none;padding-left: 1em;}#comment_tags_collapse_expand li {margin-bottom: 0px;}ul.tree {padding-left: 0em;margin-left: 1em;display: block;}ul.tree ul {padding-top: 3px;display: block;}ul.tree li {padding-top: 3px;text-indent: -1.2em;padding-left: 0.5em;padding-bottom: 3px;list-style-type: none;background: url(../../skins/standard/dependency-tree/bug-item.png) no-repeat;}ul.tree li a.b {padding-left: 30px;margin-right: -14px;text-decoration: none;}ul.tree li a.b_open {background: url(../../skins/standard/dependency-tree/tree-open.png) center no-repeat;cursor: pointer;}ul.tree li a.b_closed {background: url(../../skins/standard/dependency-tree/tree-closed.png) center no-repeat;cursor: pointer;}ul.tree a.tree_link img {border: 0;}.summ_info {display: none;font-size: 75%;}.hint {font-size: 90%;margin: 0.2em;padding: 0.1em;}.hint h3, .hint ul {margin-top: 0.1em;margin-bottom: 0.1em;}.summ A, .summ_deep A {text-decoration: none;color: darkblue;}.summ_h A {background-color: #ffffaa;color: #333;font-weight: bold;}.dependency_tree_controls input[type=submit] {min-width: 3em;}table.attachment_entry th {text-align: right;vertical-align: baseline;white-space: nowrap;}table.attachment_entry td {text-align: left;vertical-align: baseline;padding-bottom: 5px;}.file_head {font-weight: bold;font-size: 1em;background-color: #c3c3c3;border: 1px solid black;}.file_head a {text-decoration: none;font-family: monospace;font-size: 1.1em;}.file_collapse {display: none;}.section_head {background-color: #f0f0f0;border: 1px solid black;text-align: left;padding: 0.2em;}.section_head .link_here {float: right;padding-left: 1em;padding-right: 0.5em;}.lines_count a {padding-left: 0.5em;padding-right: 1em;}table.file_table {table-layout: fixed;width: 100%;empty-cells: show;border-spacing: 0px;border-collapse: collapse;border-bottom: 1px solid black;}tbody.file pre {display: inline;font-size: 0.9em;}tbody.file pre:empty {display: block;}.changed {background-color: lightblue;}.added {background-color: lightgreen;}.removed {background-color: #FFCC99;}.num {background-color: #ffe9ae;text-align:right;padding: 0 0.3em;width: 3em;}table.attachment_info th {text-align: right;vertical-align: top;}table.attachment_info td {text-align: left;vertical-align: top;}#noview {text-align: left;vertical-align: middle;}#attachment_attributes div {padding-bottom: 0.4em;}#attachment_attributes label {font-weight: bold;}#attachment_attributes .block {display: block;}#smallCommentFrame, #attachment_flags {float: left;}#smallCommentFrame {margin-right: 1.5em;}#attachment_comments_and_flags, #attachment_actions {clear: both;margin-bottom: 1ex;}#attachment_information_read_only .title {font-weight: bold;font-size: 1.5em;padding: 0;margin: 0;}#attachment_information_read_only .title #bz_edit {font-size: 0.7em;}#attachment_information_read_only .details {font-size: 90%;}#attachment_info.read #attachment_information_edit {display: none;}#attachment_info.edit #attachment_information_read_only {display: none;}#attachment_info.edit #attachment_view_window {float: left;width: 80%;}#attachment_info.edit #attachment_information_edit {width: 20%;}#attachment_info.edit #attachment_information_edit input.text,#attachment_info.edit #attachment_information_edit textarea {width: 90%;}#attachment_isobsolete {padding-right: 1em;}#attachment_information_edit {float: left;}#smallCommentFrame textarea {display: block;}textarea.bz_private {border: 1px solid #F8C8BA;}#update {clear: both;display: block;}div#update_container {clear: both;padding: 1.5em 0;}#attachment_flags {margin-bottom: 1em;}#attachment_flags p {padding-bottom: 0;margin-bottom: 0;}#editFrame, #viewDiffFrame, #viewFrame {height: 400px;width: 95%;margin-left: 2%;}.viewall_frame_container {width: 75%;margin: 2em auto;}.viewall_desc {width: 100%;border: 1px solid black;border-spacing: 0px;border-collapse: collapse;}.viewall_desc th, .viewall_desc td {border: 1px solid black;padding: 0.3em;}.viewall_frame {width: 100%;height: 350px;}.no_javascript .bz_hide, .no_javascript .bz_edit {display: none;}#hidden_obsolete_message {text-align: left;width: 75%;margin: 0  auto;font-weight: bold;}
/* skins/contrib/Dusk/global.css */
body {background: #c8c8c8;font-family: Helvetica, Arial, Geneva;padding-left: 1em;padding-right: 1em;}#titles {border-top-left-radius: 5px;border-top-right-radius: 5px;}#header .links, #footer {background-color: #929bb1;color: #ddd;}#header {border-bottom-left-radius: 5px;border-bottom-right-radius: 5px;border: none;}#header a, #footer a {color: white;text-decoration: none;}#header a:hover, #footer a:hover {text-decoration: underline;}#bugzilla-body {background: #f0f0f0;color: black;border: 1px solid #747e93;padding: 10px;font-size: 10pt;border-radius: 5px;}a {color: #6070cf;}a:hover {color: #8090ef;}hr {border-color: #969696;border-style: dashed;border-width: 1px;margin-top: 10px;}#bug-form td {padding-top: 2px;}#attachment-list {border: 2px solid #c8c8ba;font-size: 9pt;}#attachment-list th {background-color: #e6e6d8;border: none;border-bottom: 1px solid #c8c8ba;text-align: left;}#attachment-list th a {color: #646456;}#attachment-list td {border: none;}#attachment-list-actions td {border-top: 1px solid #c8c8ba;}#comments th {font-size: 9pt;font-weight: bold;padding-top: 5px;padding-right: 5px;padding-bottom: 10px;text-align: right;vertical-align: top;white-space: nowrap;}#comments td {padding-top: 2px;}.reply-button a {padding-left: 2px;padding-right: 2px;}.bz_comment {background-color: #e8e8e8;margin: 1px 1px 10px 1px;border-width: 1px;border-style: solid;border-color: #c8c8ba;padding: 5px;font-size: 9pt;}.bz_comment_head, .bz_first_comment_head {margin: 0; padding: 0;background-color: transparent;font-weight: bold;}.bz_comment_user {margin-left: 0;}.bz_comment.bz_private {background-color: #f0e8e8;border-color: #f8c8ba;}.comment_rule {display: none;}#footer {border: 1px solid #747e93;width: 100%;border-radius: 5px;}#footer #links-actions,#footer #links-edit,#footer #links-saved,#footer #links-special {margin-top: 2ex;}#footer .links {border-spacing: 30px;margin-bottom: 2ex;}.separator {color: #cccccc;}.tabbed .tabbody {background: #f8f8f8;padding: 1em;border-style: solid;border-color: #000000;border-width: 0 3px 3px 1px;}.tabs {margin: 0;padding: 0;border-collapse: collapse;}.tabs td {background: #c8c8c8;border-width: 1px;}.tabs td.selected {background: #f8f8f8;border-width: 1px 3px 0 1px;}.tabs td.spacer {background: transparent;border-top: none;border-left: none;border-right: none;}.bz_row_odd {background-color: #f0f0f0;}#page-index .outro {clear:both;}@media print {#header,#footer,.navigation {display: none;}body {background-image: none;background-color: #ffffff;}#bugzilla-body {border: none;margin: 0;padding: 0;}}
</style>

<style>/* skins/custom/global.css */
#banner > div {border-radius: 5px;}#banner a {color: #6070cf}
</style>

    


    


    

    
    <link rel="search" type="application/opensearchdescription+xml" title="Bugzilla" href="./search_plugin.cgi">
    <link rel="shortcut icon" href="images/favicon.ico"><link href="https://c.s-microsoft.com/mscc/statics/mscc-0.4.1.min.css" rel="stylesheet" type="text/css">

      

    <style>.wrapper {
    margin: 0 auto;
    box-sizing: border-box;
    -ms-box-sizing: border-box;
}

#global-footer {
    background-color: #354b60;
}

#global-footer li,#global-footer ul {
    list-style: none;
    padding: 0;
    border: 0;
    margin: 0;
    font: inherit;
    color: inherit;
    line-height: normal
}

#global-footer footer {
    margin-top: 60px;
    background: rgba(44,62,80,.5);
    clear: both;
    padding: 30px;
    margin: 0;
    font-size: 14px;
    color: #ecf0f1;
}

#global-footer footer .wrapper {
    display: -webkit-box;
    display: -ms-flexbox;
    display: flex;
    -webkit-box-align: center;
    -ms-flex-align: center;
    /* align-items:center; */
    -webkit-box-pack: justify;
    -ms-flex-pack: justify;
    justify-content: space-between;
    -ms-flex-wrap: wrap;
    flex-wrap: wrap;
}

#global-footer footer .microsoft-logo img {
    display: block;
    margin: 0 auto;
    width: 110px;
}

#global-footer footer .contact {
    text-align: left
}

#global-footer footer .legal {
    text-align: right
}

#global-footer footer a,#global-footer footer span {
    padding: 0 10px
}

#global-footer footer a {
    color: inherit;
    text-decoration: none;
}

#global-footer footer a:hover {
    color: #fff;
    text-decoration: none;
}

#global-footer .sub-footer {
    background-color: #233140;
    color: hsla(0,0%,100%,.7);
    font-size: 14px;
    padding: 3px;
    -webkit-font-smoothing: antialiased;
    -moz-font-smoothing: antialiased
}

@media (max-width: 992px) {
    html:not(.non-responsive) #global-footer footer {
        padding:0
    }

    html:not(.non-responsive) #global-footer footer .wrapper {
        -webkit-box-align: center;
        -ms-flex-align: center;
        align-items: center;
        -webkit-box-orient: vertical;
        -webkit-box-direction: normal;
        -ms-flex-direction: column;
        flex-direction: column;
        max-width: 430px
    }

    html:not(.non-responsive) #global-footer footer .microsoft-logo {
        -webkit-box-ordinal-group: 1;
        -ms-flex-order: 0;
        order: 0
    }

    html:not(.non-responsive) #global-footer footer .wrapper>:not(.microsoft-logo) {
        -webkit-box-ordinal-group: 2;
        -ms-flex-order: 1;
        order: 1
    }

    html:not(.non-responsive) #global-footer footer .contact,html:not(.non-responsive) #global-footer footer .legal,html:not(.non-responsive) #global-footer footer .microsoft-logo {
        float: none;
        padding: 20px 0;
        text-align: center
    }

    html:not(.non-responsive) #global-footer footer .contact,html:not(.non-responsive) #global-footer footer .legal {
        padding-top: 0
    }
}
</style>
  </head>

  <body class="bugzilla-xamarin-com
                 bz_bug
                 bz_status_NEEDINFO
                 bz_product_Class_Libraries
                 bz_component_System.Web
                 bz_bug_11570 yui-skin-sam">

  <div id="header">

    <div id="titles">
      <span id="title">Bugzilla – Bug&nbsp;11570</span>

        <span id="subtitle" class="subheader">System.IO.IOException: BeginWrite in HttpWebRequest when connecting to encrypted server</span>

        <span id="information" class="header_addl_info">Last modified: 2016-07-31 17:12:22 UTC</span>
    </div>


    <div id="common_links">
    </div>
  </div>

  <div id="bugzilla-body">




<form name="changeform" id="changeform" method="post" action="process_bug.cgi">

  <input type="hidden" name="delta_ts" value="2016-07-31 17:12:22">
  <input type="hidden" name="id" value="11570">
  <input type="hidden" name="token" value="1559190130-ZCeBZhjKZu2Wz_rR9G5hTbvP6k8D9eKJZ7fPdW_gEak">
<div class="bz_short_desc_container edit_form">
     <a href="bug.html"><b>Bug&nbsp;11570</b></a> <span id="summary_container" class="bz_default_hidden">
      - <span id="short_desc_nonedit_display">System.IO.IOException: BeginWrite in HttpWebRequest when connecting to encrypted server</span>
     </span>

    <div id="summary_input"><span class="field_label " id="field_label_short_desc">


  <a title="The bug summary is a short sentence which succinctly describes what the bug is about." class="field_help_link" href="#">Summary:</a>

</span><span title="System.IO.IOException: BeginWrite in HttpWebRequest when connecting to encrypted server">System.IO.IOException: BeginWrite in HttpWebRequest when connecting to encryp...
        </span>
    </div>
  </div>
  
  <table class="edit_form">
    <tbody><tr>
      
      <td id="bz_show_bug_column_1" class="bz_show_bug_column">
        <table>
          <tbody><tr>
    <th class="field_label">
      <a href="#">Status</a>:
    </th>
    <td id="bz_field_status">
      <span id="static_bug_status">NEEDINFO
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label " id="field_label_alias">


  <a title="A short, unique name assigned to a bug in order to assist with looking it up and referring to it in other places in Bugzilla." class="field_help_link" href="#">Alias:</a>

</th>
    <td>
        None
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label " id="field_label_product">


  <a title="Bugs are categorised into Products and Components. Select a Classification to narrow down this list." class="field_help_link" href="#">Product:</a>

</th>
  <td class="field_value " id="field_container_product">Class Libraries

</td>
    </tr>

    
    <tr class="bz_default_hidden"><th class="field_label " id="field_label_classification">


  <a title="Bugs are categorised into Classifications, Products and Components. classifications is the top-level categorisation." class="field_help_link" href="#">Classification:</a>

</th>
  <td class="field_value " id="field_container_classification">Mono

</td>
    </tr>
    
    
    
    <tr><th class="field_label " id="field_label_component">


  <a title="Components are second-level categories; each belongs to a particular Product. Select a Product to narrow down this list." class="field_help_link" href="#">Component:</a>

</th>
  <td class="field_value " id="field_container_component">System.Web

  ()
</td>
    </tr>
    <tr><th class="field_label " id="field_label_version">


  <a title="The version field defines the version of the software the bug was found in." class="field_help_link" href="#">Version:</a>

</th>
<td>2.10.x
  </td>
    </tr>
    
    
    
    <tr><th class="field_label " id="field_label_rep_platform">


  <a title="The hardware platform the bug was observed on. Note: When searching, selecting the option &quot;All&quot; only finds bugs whose value for this field is literally the word &quot;All&quot;." class="field_help_link" href="#">Hardware:</a>

</th>
      <td class="field_value">PC
        Windows
      </td>
    </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          <tr>
      <th class="field_label">
        <label accesskey="i">
          <a href="#"><u>I</u>mportance</a></label>:
      </th>
      <td>---
       normal
      </td>
    </tr>

      <tr><th class="field_label " id="field_label_target_milestone">


  <a title="The Target Milestone field is used to define when the engineer the bug is assigned to expects to fix it." class="field_help_link" href="#">Target Milestone:</a>

</th><td>Untriaged
  </td>
      </tr>

          <tr><th class="field_label " id="field_label_assigned_to">


  <a title="The person in charge of resolving the bug." class="field_help_link" href="#">Assignee:</a>

</th>
      <td><span class="vcard"><span class="fn">Sebastien Pouliot</span>
</span>
      </td>
    </tr>

    
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr><th class="field_label " id="field_label_bug_file_loc">


  <a title="Bugs can have a URL associated with them - for example, a pointer to a web site where the problem is seen." class="field_help_link" href="#">URL:</a>

</th>
    <td>
      <span id="bz_url_input_area">
      </span>
    </td>
  </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>

          
<tr><th class="field_label " id="field_label_dependson">


  <a title="The bugs listed here must be resolved before this bug can be resolved." class="field_help_link" href="#">Depends on:</a>

</th>

  <td>
    <span id="dependson_input_area">
    </span>

  </td>
  </tr>

  <tr><th class="field_label " id="field_label_blocked">


  <a title="This bug must be resolved before the bugs listed in this field can be resolved." class="field_help_link" href="#">Blocks:</a>

</th>

  <td>
    <span id="blocked_input_area">
    </span>

  </td>
  </tr>

        </tbody></table>
      </td>
      <td>
        <div class="bz_column_spacer">&nbsp;</div>
      </td>
      
      <td id="bz_show_bug_column_2" class="bz_show_bug_column">
        <table>
        <tbody><tr>
    <th class="field_label">
      Reported:
    </th>
    <td>2013-04-04 03:05 UTC by <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
    </td>
  </tr>

  <tr>
    <th class="field_label">
      Modified:
    </th>
    <td>2016-07-31 17:12 UTC
      (<a href="activity.html">History</a>)
    </td>

  </tr>
<tr>
      <th class="field_label">
        <label accesskey="a">
          CC List:
        </label>
      </th>
      <td>7
          users
          <span id="cc_edit_area_showhide_container" class="bz_default_hidden">
            (<a href="#" id="cc_edit_area_showhide">show</a>)
          </span>
        <div id="cc_edit_area">
          <br>
            <select id="cc" multiple="multiple" size="5">
                <option value="alexandre.marcondes">alexandre.marcondes</option>
                <option value="heavycrag">heavycrag</option>
                <option value="janusz.nykiel">janusz.nykiel</option>
                <option value="johannes.rudolph">johannes.rudolph</option>
                <option value="jonp">jonp</option>
                <option value="mono-bugs+mono">mono-bugs+mono</option>
                <option value="paul.achess.roy">paul.achess.roy</option>
            </select>
        </div>
          
      </td>
    </tr>

<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>
<tr>
      <th class="field_label " id="field_label_cf_tags">


  <a title="A custom Free Text field in this installation of Bugzilla." class="field_help_link" href="#">Tags:</a>

</th>
  <td class="field_value " id="field_container_cf_tags">

</td>
    </tr>
    <tr>
      <th class="field_label " id="field_label_cf_bug_regression">


  <a title="If this bug is not a regression select no, otherwise select yes and complete the &quot;last known good build&quot; entry." class="field_help_link" href="#">Is this bug a regression?:</a>

</th>
  <td class="field_value " id="field_container_cf_bug_regression">---

</td>
    </tr>
    <tr>
      <th class="field_label  bz_hidden_field" id="field_label_cf_bug_regression_build">


  <a title="What is the last known good build? (e.g. C7, 4.5.x, etc.)" class="field_help_link" href="#">Last known good build:</a>

</th>
  <td class="field_value  bz_hidden_field" id="field_container_cf_bug_regression_build">

</td>
    </tr>
<tr>
    <td colspan="2" class="bz_section_spacer"></td>
  </tr>



        </tbody></table>
      </td>
    </tr>
    <tr>
      <td colspan="3">
          <hr id="bz_top_half_spacer">
      </td>
    </tr>
  </tbody></table>

  <table id="bz_big_form_parts">
  <tbody><tr>
  <td>

    


<br>
<table id="attachment_table">
  <tbody><tr id="a0">
    <th colspan="2" class="left">
      Attachments
    </th>
  </tr>


      <tr id="a1" class="bz_contenttype_application_octet-stream">
        <td>
            <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3747&amp;file=ReproProjects.7z" title="View the content of the attachment">
          <b>contains the three projects for issue repro</b></a>

          <span class="bz_attach_extra_info">
              (34.34 KB,
                application/octet-stream)

            <br>
            <a href="#attach_3747" title="Go to the comment associated with the attachment">2013-04-04 03:05 UTC</a>,

            <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
          </span>
        </td>


        <td>
          <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3747&amp;file=ReproProjects.7z">Details</a>
        </td>
      </tr>
      <tr id="a2" class="bz_contenttype_application_octet-stream">
        <td>
            <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3752&amp;file=monocert.pcapng" title="View the content of the attachment">
          <b>The Wireshark traces requested (see additional comments for explanation)</b></a>

          <span class="bz_attach_extra_info">
              (23.88 KB,
                application/octet-stream)

            <br>
            <a href="#attach_3752" title="Go to the comment associated with the attachment">2013-04-04 17:00 UTC</a>,

            <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
          </span>
        </td>


        <td>
          <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3752&amp;file=monocert.pcapng">Details</a>
        </td>
      </tr>
      <tr id="a3" class="bz_contenttype_application_octet-stream">
        <td>
            <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3753&amp;file=monocert2.pcapng" title="View the content of the attachment">
          <b>Another trace using both frameworks</b></a>

          <span class="bz_attach_extra_info">
              (5.95 KB,
                application/octet-stream)

            <br>
            <a href="#attach_3753" title="Go to the comment associated with the attachment">2013-04-04 17:04 UTC</a>,

            <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
          </span>
        </td>


        <td>
          <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3753&amp;file=monocert2.pcapng">Details</a>
        </td>
      </tr>
      <tr id="a4" class="bz_contenttype_application_octet-stream">
        <td>
            <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3770&amp;file=log" title="View the content of the attachment">
          <b>mono traces as requested</b></a>

          <span class="bz_attach_extra_info">
              (62.04 KB,
                application/octet-stream)

            <br>
            <a href="#attach_3770" title="Go to the comment associated with the attachment">2013-04-08 10:21 UTC</a>,

            <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
          </span>
        </td>


        <td>
          <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3770&amp;file=log">Details</a>
        </td>
      </tr>
      <tr id="a5" class="bz_contenttype_application_x-zip-compressed">
        <td>
            <a href="https://bugzilla.xamarin.com/attachment.cgi?id=4071&amp;file=certs%20made%20with%20makecert%20and%20openssl.zip" title="View the content of the attachment">
          <b>certificates for repro; made-with-openssl works; made-with-makecert doesn't</b></a>

          <span class="bz_attach_extra_info">
              (5.29 KB,
                application/x-zip-compressed)

            <br>
            <a href="#attach_4071" title="Go to the comment associated with the attachment">2013-06-05 08:16 UTC</a>,

            <span class="vcard"><span class="fn">Janusz Nykiel</span>
</span>
          </span>
        </td>


        <td>
          <a href="https://bugzilla.xamarin.com/attachment.cgi?id=4071&amp;file=certs%20made%20with%20makecert%20and%20openssl.zip">Details</a>
        </td>
      </tr>

  
</tbody></table>
<br>

  </td>
  <td>
  </td>
  </tr></tbody></table>
<hr>

<div id="add_comment" class="bz_section_additional_comments">
<div class="box" style="margin: 1px 1px 10px 1px; max-width: 47.8em">
    <p>
        <strong>Notice (2018-05-24)</strong>: bugzilla.xamarin.com is now in
        <strong>read-only</strong> mode.
    </p>
    <p>
        Please join us on
        <a href="https://developercommunity.visualstudio.com/spaces/8/index.html">
        Visual Studio Developer Community</a> and in the
        <a href="https://github.com/xamarin">Xamarin</a> and
        <a href="https://github.com/mono">Mono</a> organizations on
        GitHub to continue tracking issues. Bugzilla will remain
        available for reference in read-only mode. We will continue to work
        on <strong>open</strong> Bugzilla bugs, copy them to the new locations
        as needed for follow-up, and add the new items under <strong>Related
        Links</strong>.
    </p>
    <p>
        Our sincere thanks to everyone who has contributed on this bug
        tracker over the years. Thanks also for your understanding as we
        make these adjustments and improvements for the future.
    </p>
    <hr><p>
        <strong>Please create a new report for Bug&nbsp;11570</strong> on 
            <a href="https://github.com/mono">GitHub</a> or <a href="https://docs.microsoft.com/visualstudio/ide/how-to-report-a-problem-with-visual-studio-2017">Developer Community</a> if you have new
        information to add and do not yet see a matching new report. </p>
    <p>
        If the latest results still closely match this report, you can use the
        original description:
    </p>
    <ul>
        <li>
            Export the original title and description:
            <span class="bz_comment_tag" style="display:inline-block">
                <a href="bug.html">GitHub Markdown</a>
            </span> or
            <span class="bz_comment_tag" style="display:inline-block">
                <a href="bug.html">Developer Community HTML</a>
            </span>
        </li>
        <li>
            Copy the title and description into the new report. Adjust them
            to be up-to-date if needed.
        </li>
        <li>Add your new information.</li>
    </ul>
    <p>In special cases on GitHub you might also want the comments:
        <span class="bz_comment_tag" style="display:inline-block">
            <a href="bug.html">GitHub Markdown with public comments</a>
        </span>
    </p>
</div>

    <div style="margin: 4ex 0">
        <table><tbody><tr><th class="field_label " id="field_label_see_also">


  <a title="This allows you to refer to bugs in other installations. You can enter a URL to a bug in the 'Add Bug URLs' field to note that that bug is related to this one. You can enter multiple URLs at once by separating them with whitespace. You should normally use this field to refer to bugs in other installations. For bugs in this installation, it is better to use the Depends on and Blocks fields." class="field_help_link" href="#">Related Links:</a>

</th>
  <td class="field_value " id="field_container_see_also">

</td>
    </tr>
        </tbody></table>
    </div>

    <table id="bug_status_bottom" class="status">
        <tbody><tr>
            <th class="field_label">
                <a href="#">Status</a>:
            </th>
            <td><div id="status">NEEDINFO


  <span id="resolution_settings">
  </span>

</div>


            </td>
        </tr>
    </tbody></table>

</div>
    <hr>

  
  <div id="comments">




<!-- This auto-sizes the comments and positions the collapse/expand links
     to the right. -->
<table class="bz_comment_table">
<tbody><tr>
<td>
<div id="c0" class="bz_comment bz_first_comment">

      <div class="bz_first_comment_head">


        <span class="bz_comment_number">
          <a href="bug.html">Description</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-04 03:05:09 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="https://bugzilla.xamarin.com/attachment.cgi?id=3747&amp;file=ReproProjects.7z" name="attach_3747" title="contains the three projects for issue repro">attachment 3747</a> <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3747&amp;file=ReproProjects.7z" title="contains the three projects for issue repro">[details]</a></span>
contains the three projects for issue repro

I’ve encountered this issue first with Mono4Android but have since been able to trace it down to Mono itself:
I have a WCF based REST webservice that I need to connect to. It works fine from both Microsoft .NET based clients as well as Mono based clients if I access it via HTTP. However, recently I’ve added HTTPS access and that’s where things started going wrong. The certificate I’m using is self-signed so I’ve created my own callback for 
ServicePointManager.ServerCertificateValidationCallback
which currently accepts any kind of certificate.
If I then access the webservice, I get the following webexception thrown from Mono based clients (both on my Windows 8 box and Mono 4 Android 4.6 based clients):

Unhandled Exception: System.Net.WebException: Error getting response stream (Write: BeginWrite failure): SendFailure ---&gt; System.IO.IOException: BeginWrite failure
The full stack trace is as follows
Unhandled Exception: System.Net.WebException: Error getting response stream (Wri
te: BeginWrite failure): SendFailure ---&gt; System.IO.IOException: BeginWrite fail
ure
  at System.Net.Sockets.NetworkStream.BeginWrite (System.Byte[] buffer, Int32 of
fset, Int32 size, System.AsyncCallback callback, System.Object state) [0x0007c]
in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\System\System.Net.S
ockets\NetworkStream.cs:258
  at Mono.Security.Protocol.Tls.RecordProtocol.BeginSendRecord (ContentType cont
entType, System.Byte[] recordData, System.AsyncCallback callback, System.Object
state) [0x00026] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\Mo
no.Security\Mono.Security.Protocol.Tls\RecordProtocol.cs:706
  at Mono.Security.Protocol.Tls.RecordProtocol.SendRecord (ContentType contentTy
pe, System.Byte[] recordData) [0x00000] in C:\cygwin\tmp\monobuild\build\BUILD\m
ono-2.10.9\mcs\class\Mono.Security\Mono.Security.Protocol.Tls\RecordProtocol.cs:
727
  at Mono.Security.Protocol.Tls.RecordProtocol.SendAlert (Mono.Security.Protocol
.Tls.Alert alert) [0x00027] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\m
cs\class\Mono.Security\Mono.Security.Protocol.Tls\RecordProtocol.cs:625
  at Mono.Security.Protocol.Tls.RecordProtocol.SendAlert (AlertDescription descr
iption) [0x00000] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\M
ono.Security\Mono.Security.Protocol.Tls\RecordProtocol.cs:596
  at Mono.Security.Protocol.Tls.SslStreamBase.AsyncHandshakeCallback (IAsyncResu
lt asyncResult) [0x00037] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs
\class\Mono.Security\Mono.Security.Protocol.Tls\SslStreamBase.cs:104
  --- End of inner exception stack trace ---
  at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x0006
c] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\System\System.Ne
t\HttpWebRequest.cs:831 at System.Net.HttpWebRequest.GetResponse () [0x0000e] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\System\System.Net\HttpWebRequest.cs:836  at MonoHttpWebRequest.MainClass.Main (System.String[] args) [0x00000] in &lt;filename unknown&gt;:0[ERROR] FATAL UNHANDLED EXCEPTION: System.Net.WebException: Error getting response stream (Write: BeginWrite failure): SendFailure ---&gt; System.IO.IOException: BeginWrite failure  at System.Net.Sockets.NetworkStream.BeginWrite (System.Byte[] buffer, Int32 offset, Int32 size, System.AsyncCallback callback, System.Object state) [0x0007c]in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\System\System.Net.Sockets\NetworkStream.cs:258  at Mono.Security.Protocol.Tls.RecordProtocol.BeginSendRecord (ContentType contentType, System.Byte[] recordData, System.AsyncCallback callback, System.Object
state) [0x00026] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\Mo
no.Security\Mono.Security.Protocol.Tls\RecordProtocol.cs:706
  at Mono.Security.Protocol.Tls.RecordProtocol.SendRecord (ContentType contentTy
pe, System.Byte[] recordData) [0x00000] in C:\cygwin\tmp\monobuild\build\BUILD\m
ono-2.10.9\mcs\class\Mono.Security\Mono.Security.Protocol.Tls\RecordProtocol.cs:
727
  at Mono.Security.Protocol.Tls.RecordProtocol.SendAlert (Mono.Security.Protocol.Tls.Alert alert) [0x00027] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\Mono.Security\Mono.Security.Protocol.Tls\RecordProtocol.cs:625  at Mono.Security.Protocol.Tls.RecordProtocol.SendAlert (AlertDescription description) [0x00000] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\M
ono.Security\Mono.Security.Protocol.Tls\RecordProtocol.cs:596
  at Mono.Security.Protocol.Tls.SslStreamBase.AsyncHandshakeCallback (IAsyncResu
lt asyncResult) [0x00037] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs
\class\Mono.Security\Mono.Security.Protocol.Tls\SslStreamBase.cs:104
  --- End of inner exception stack trace ---
  at System.Net.HttpWebRequest.EndGetResponse (IAsyncResult asyncResult) [0x0006c] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\System\System.Net\HttpWebRequest.cs:831  at System.Net.HttpWebRequest.GetResponse () [0x0000e] in C:\cygwin\tmp\monobuild\build\BUILD\mono-2.10.9\mcs\class\System\System.Net\HttpWebRequest.cs:836  at MonoHttpWebRequest.MainClass.Main (System.String[] args) [0x00000] in &lt;filename unknown&gt;:0

The exception I get from Mono4Android is similar
System.Net.WebException: Error getting response stream (Write: BeginWrite failure): SendFailure 
04-02 18:20:16.470 I/MonoDroid(18254): UNHANDLED EXCEPTION: System.Net.WebException: Error getting response stream (Write: BeginWrite failure): SendFailure ---&gt; System.IO.IOException: BeginWrite failure 
04-02 18:20:16.470 I/MonoDroid(18254):   at System.Net.Sockets.NetworkStream.BeginWrite (System.Byte[] buffer, Int32 offset, Int32 size, System.AsyncCallback callback, System.Object state) [0x00000] in &lt;filename unknown&gt;:0 
04-02 18:20:16.470 I/MonoDroid(18254):   at Mono.Security.Protocol.Tls.RecordProtocol.BeginSendRecord (ContentType contentType, System.Byte[] recordData, System.AsyncCallback callback, System.Object state) [0x00000] in &lt;filename unknown&gt;:0 
04-02 18:20:16.470 I/MonoDroid(18254):   at Mono.Security.Protocol.Tls.RecordProtocol.SendRecord (ContentType contentType, System.Byte[] recordData) [0x00000] in &lt;filename unknown&gt;:0 
04-02 18:20:16.470 I/MonoDroid(18254):   at Mono.Security.Protocol.Tls.RecordProtocol.SendAlert (Mono.Security.Protocol.Tls.Alert alert) [0x00000] in &lt;filename unknown&gt;:0 
04-02 18:20:16.470 I/MonoDroid(18254):   at Mono.Security.Protocol.Tls.RecordProtocol.SendAlert (AlertDescription description) [0x00000] in &lt;filename unknown&gt;:0 
04-02 18:20:16.470 I/MonoDroid(18254):   at Mono.Security.Protocol.Tls.SslStreamBase.AsyncHandshakeCallback (IAsyncResult asyncResult) [0x00000] in &lt;filename unknown&gt;:0 
04-02 18:20:16.470 I/MonoDroid(18254):   --- End of inner exception stack trace --- 
04-02 18:20:16.470 I/MonoDroid(18254): at System.Net.HttpWebRequest.EndGetResponse (System.IAsyncResult) &lt;IL 0x00064, 0x002d0&gt;
04-02 18:20:16.470 I/MonoDroid(18254): at System.Net.HttpWebRequest.GetResponse () &lt;IL 0x00010, 0x000d3&gt;
04-02 18:20:16.470 I/MonoDroid(18254): at AndroidApplication1.Activity1.button_Click (object,System.EventArgs) [0x00011] in d:\Personal\Documents\Visual Studio 2012\Projects\AndroidApplication1\AndroidApplication1\Activity1.cs:43 
04-02 18:20:16.470 I/MonoDroid(18254): at Android.Views.View/IOnClickListenerImplementor.OnClick (Android.Views.View) [0x0000b] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.4-series/6418373f/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Android.Views.View.cs:631 
04-02 18:20:16.470 I/MonoDroid(18254): at Android.Views.View/IOnClickListenerInvoker.n_OnClick_Landroid_view_View_ (intptr,intptr,intptr) [0x00010] in /Users/builder/data/lanes/monodroid-mac-monodroid-4.4-series/6418373f/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Android.Views.View.cs:602 
04-02 18:20:16.470 I/MonoDroid(18254): at (wrapper dynamic-method) object.f0ff84a6-0b9e-431a-a87e-a29a586c1ef3 (intptr,intptr,intptr) &lt;IL 0x00017, 0x00043&gt;

I’m providing a sample server (MonoCertErrorRepro), a Visual Studio 2012 project that needs to be run on Microsoft.NET. in order to run it, the following steps first need to be taken:

A certificate needs to be created for HTTPS access. To do this, start an administrative visual studio command prompt and do the following:
C:\temp\certificates&gt;makecert -n "CN=TestCA" -r -sv TestCa.pvk TestCA.cer
Succeeded
C:\temp\certificates&gt;makecert -sk SignedByCA -iv TestCA.pvk -n "CN=ReproServer"-ic TestCA.cer ReproServer.cer -sr LocalMachine -ss My
Succeeded

The latter automatically adds a certificate for “ReproServer” to the local machine certificate store. Then open this certificate and extract the “Thumbprint” attribute. This certificate now needs to be enabled for HTTPS access for the server application: (replace certhash with the value from the self generated certificate)
C:\temp\certificates&gt;netsh http add sslcert ipport=0.0.0.0:443 certhash=4a1ff346a5101d25b054ab39ad9b3719cf9fc27b appid={63e6e834-db2c-4c56-ade3-c87c3b548a8f}
If you’re running this on Windows 2008 R2 or Windows 7, you may run into additional trouble and have to install a hotfix. This is necessary if the command above results in
SSL Certificate add failed, Error: 1312
A specified logon session does not exist. It may already have been terminated.

The hotfix can be obtained from (<a href="http://support.microsoft.com/kb/981506">http://support.microsoft.com/kb/981506</a>) – sorry about that… 

Finally, HTTP and HTTPS access needs to be enabled (replace domain\user with the actual domain/user you’re running the program from – if machine is not domain joined, user hostname instead of domain)
C:\Windows\system32&gt;netsh http add urlacl url=<a href="http://+:80/">http://+:80/</a> user=domain\user

URL reservation successfully added

C:\Windows\system32&gt;netsh http add urlacl url=<a href="https://+:443/">https://+:443/</a> user=domain\user

URL reservation successfully added

Then for good measure add firewall exception for port 80 and 443 for all network types (don’t forget to remove again after the tests… you know what I mean ;)
Now reboot the machine, and run the program (run Visual Studio as normal user, not administrator!). try accessing <a href="http://localhost/help">http://localhost/help</a> and <a href="https://localhost/help">https://localhost/help</a>. For the latter you should get a certificate warning in the browser, but the help pages should be accessible from both URLs. If you’ve created the firewall exception, access should also be possible over the network now.

Then start the MonoHttpWebRequest program in Xamarin Studio (I’m using 4.03) – and run it using Microsoft.Net. 
Note the output saying
Hello World!
Sending request to <a href="https://localhost/help">https://localhost/help</a>
validate cert called for CN=ReproServer
Response received
Press any key to continue . . . 

Then run it again using Mono (I’m using Mono 2.10.9)
Note the output also starting with
Hello World!
Sending request to <a href="https://localhost/help">https://localhost/help</a>
And then the uncaught exception

From the output you’ll see that the validatedCertificate method is not even being called.

You can repeat this using Mono4Android and my AndroidApplication1 project. Start it, press the button and it’ll happen.</pre>
    </div>

    <div id="c1" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c1">Comment 1</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sebastien Pouliot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-04 14:36:50 UTC
        </span>

      </div>




<pre class="bz_comment_text">I do not have VS2012 or a recent Windows version to duplicate this right now. 

Could you use Wireshark to capture a network trace of the connection between your client and server software ?

That should give me a quick idea of where things went wrong (there's not many steps before validating the certificates).</pre>
    </div>

    <div id="c2" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c2">Comment 2</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-04 16:59:50 UTC
        </span>

      </div>




<pre class="bz_comment_text">As requested. I ran the server on 10.145.28.103, client on 10.145.42.7.

the dump first shows me accessing <a href="https://wsklo1963/">https://wsklo1963/</a> using Firefox. I got the usual cert warning, so I downloaded the cert, created an exception to get the welcome page. Then I accessed <a href="https://wsklo1963/help">https://wsklo1963/help</a>

That's all packets up unti packet 53.

Then I ran the client app first using Microsoft.NET (packets 54 to 65) accessing <a href="https://wsklo1963/help">https://wsklo1963/help</a>

Finally I ran the client again using Mono (starting from packet 66)

It looks like Mono wants to do SSL whereas Microsoft.NET does TLS.</pre>
    </div>

    <div id="c3" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c3">Comment 3</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-04 17:00:24 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="https://bugzilla.xamarin.com/attachment.cgi?id=3752&amp;file=monocert.pcapng" name="attach_3752" title="The Wireshark traces requested (see additional comments for explanation)">attachment 3752</a> <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3752&amp;file=monocert.pcapng" title="The Wireshark traces requested (see additional comments for explanation)">[details]</a></span>
The Wireshark traces requested (see additional comments for explanation)</pre>
    </div>

    <div id="c4" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c4">Comment 4</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-04 17:04:24 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="https://bugzilla.xamarin.com/attachment.cgi?id=3753&amp;file=monocert2.pcapng" name="attach_3753" title="Another trace using both frameworks">attachment 3753</a> <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3753&amp;file=monocert2.pcapng" title="Another trace using both frameworks">[details]</a></span>
Another trace using both frameworks

Oh, by the way, I've added 
ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls;

to the client code prior to 

ServicePointManager.ServerCertificateValidationCallback += validatedCertificate;

This trace shows the security protocol choice commented out - packets 1-5 are from Mono, from 6 onward is from the Microsoft.NET. It shows the same thing... Mono tries SSL, but the server apparently only wants SSL.</pre>
    </div>

    <div id="c5" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c5">Comment 5</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sebastien Pouliot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-05 09:23:33 UTC
        </span>

      </div>




<pre class="bz_comment_text">The first file, monocert.pcapng, stops before showing the server answer to the Client Hello (frame #69). I cannot know what's wrong without the server answer to the hello.

Maybe the server never received it ? or the client never got the the answer ? or the trace was stopped before it was received.

<span class="quote">&gt; It looks like Mono wants to do SSL whereas Microsoft.NET does TLS.</span>

Not quite. The trace shows TLS 1.0 is being requested (frame #69) in an SSL hello. 

    Version: TLS 1.0 (0x0301)

That's the way to ask a SSL server if it supports TLS, so the next exchanges can be done using TLS (if supported) or continue with SSL.

The second trace also show a lack of answer to the Client Hello (frame #4) from the server - which is a very bad behavior from the server (maybe it can be configured differently) not to answer (even by an alert). 

I'll check the code, from memory, when you set:

ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls;

it should be using the TLS version of the hello message (format not only set the version).</pre>
    </div>

    <div id="c6" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c6">Comment 6</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-05 14:29:25 UTC
        </span>

      </div>




<pre class="bz_comment_text">There's nothing after frame 70 (or frame 5 in the second capture)... 

Comparing the Client Hello from the browser (packet 28) with the one from Microsoft.NET and Mono shows that both browser and Microsoft.NET (packet 57) send a whole lot more data in the Client Hello Packets than the Mono Client (packet 69) - notably in terms of extensions (Mono provides none, both Mozilla and Microsoft.NET do). Also, curiously, Wireshark shows browser and Microsoft.NET as TLSv1 and Mono as SSL - so it must look at something that isn't there in the client hello packet from Mono to determine what it shows in the protocol column.

There's very little you can do in terms of configuration since the server is self-hosted.

Setting 

ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls;

doesn't change a thing... (the first capture was done with it set, the second with it commented out).

Other browser (I've also tested IE10), also show extensions in the Client Hello, and Wireshark always shows the Client Hello from the Mono Client as SSL, not TLS, even though content type, version and handshake protocol version all say TLS 1.0.

My server repro project should run just fine in an older Visual Studio - I think it should run unchanged down to VS2008/.NET 3.5SP1.</pre>
    </div>

    <div id="c7" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c7">Comment 7</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-05 14:52:38 UTC
        </span>

      </div>




<pre class="bz_comment_text">Here's something interesting - if I set

ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;

The the Microsoft.NET client can't connect either. And in Wireshark, the Client Hello now also shows up as SSL, not TLS, and has no extensions either. And the server just resets the connection, too.
 Here's the stracktrace from the Microsoft.NET client

Unhandled Exception: System.Net.WebException: The underlying connection was clos
ed: An unexpected error occurred on a send. ---&gt; System.IO.IOException: Unable t
o read data from the transport connection: An existing connection was forcibly c
losed by the remote host. ---&gt; System.Net.Sockets.SocketException: An existing c
onnection was forcibly closed by the remote host
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size,
 SocketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 s
ize)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 s
ize)
   at System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 c
ount)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocol
Request asyncRequest)
   at System.Net.Security.SslState.CheckCompletionBeforeNextReceive(ProtocolToke
n message, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartSendBlob(Byte[] incoming, Int32 count, A
syncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byt
e[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyRes
ult)
   at System.Net.TlsStream.CallProcessAuthentication(Object state)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionCo
ntext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, C
ontextCallback callback, Object state, Boolean preserveSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, C
ontextCallback callback, Object state)
   at System.Net.TlsStream.ProcessAuthentication(LazyAsyncResult result)
   at System.Net.TlsStream.Write(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.PooledStream.Write(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.ConnectStream.WriteHeaders(Boolean async)
   --- End of inner exception stack trace ---
   at System.Net.HttpWebRequest.GetResponse()
   at MonoHttpWebRequest.MainClass.Main(String[] args) in d:\Personal\Documents\
Visual Studio 2012\Projects\MonoHttpWebRequest\MonoHttpWebRequest\Program.cs:lin
e 22

I can't help but think those extensions that are missing actually mean something.</pre>
    </div>

    <div id="c8" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c8">Comment 8</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sebastien Pouliot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-05 15:08:53 UTC
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; I can't help but think those extensions that are missing actually mean
&gt; something.</span>

No, extensions were defined in TLS only (it's not part of any SSL specifications) and are always optional. They were created so clients/servers could support extra features without requiring an update to the TLS specification itself.

The issue is that your server is *passively* (no alert) refusing (older) SSL connections, including the SSL/TLS compatibility initiation. i.e. A TLS server should supports the SSL client hello message and, based on the protocol version, answer TLS (&gt; 0x300) or with  SSL (&lt;= 0x300) or send an alert if it does not want to use SSL.

Like I said earlier setting `ServicePointManager.SecurityProtocol` to Tls _should_ disable the client side SSL and send a TLS hello (including an extension). 

I'm surprised it does not (because we need that extension for some servers and tests would fail without it) and I need to review the code (maybe that was fixed *after* 2.10.9 or M4A 4.4). I'll let you know asap.</pre>
    </div>

    <div id="c9" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c9">Comment 9</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sebastien Pouliot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-06 12:34:16 UTC
        </span>

      </div>




<pre class="bz_comment_text">A quick test shows that using 

		ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls;

in a Xamarin.iOS 6.2 app sends a TLSv1 ClientHello - like I expected (i.e. not the SSL ClientHello with a TLS version number). 

I'll look at the latest Mono 2.10.12 to confirm if it's the same - but it's likely you need more recent versions of Mono (and Xamarin.Android).</pre>
    </div>

    <div id="c10" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c10">Comment 10</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-06 16:41:22 UTC
        </span>

      </div>




<pre class="bz_comment_text">I'm running the latest Xamarin.Android version from the release channel (can't upgrade to the 4.7 beta stream as there are some pretty nasty bugs around... see mailing list - I don't have time to deal with all the potential issues).

As for Mono proper, I'm running the latest release at the time of filing this bug.</pre>
    </div>

    <div id="c11" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c11">Comment 11</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-06 16:55:08 UTC
        </span>

      </div>




<pre class="bz_comment_text">Just tested... same error with Mono 2.10.9 as with Mono 3.0.6.

There's one thing... Xamarin.IOS translates c# code to objective C, does it not? Otherwise you can't pass Apple's rules for the store. So, in the end it's not using Mono to make the requests but instead translates to whatever HttpWebRequest is called on IOS. So that's certainly a major differnce to an app running on Mono.</pre>
    </div>

    <div id="c12" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c12">Comment 12</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sebastien Pouliot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-06 17:59:58 UTC
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; /Users/builder/data/lanes/monodroid-mac-monodroid-4.4-series/6418373f/source/monodroid/src/Mono.Android/platforms/android-8/src/generated/Android.Views.View.cs:631 </span>

The stacktrace from your original description seemed to imply 4.4 - but that could be an artefact of the build system (and not the version you used). I do not work on the Android product and never noticed that before.


<span class="quote">&gt; Xamarin.IOS translates c# code to objective C, does it not? </span>

No. Xamarin.iOS does *not* translate C# into Objective-C. 

<span class="quote">&gt; Otherwise you can't pass Apple's rules for the store. </span>

No. Rules is not about using Objective-C (or not). What Apple does not allow is JIT compilation. What Xamarin.iOS uses is AOT (ahead of time) compilation which compiles .NET into native ARM executables (on the Mac, not on the devices). That's perfectly fine by Apple rules. 

<span class="quote">&gt; So, in the end it's not using Mono to make the requests but instead translates to whatever HttpWebRequest is called on IOS.</span>

No. What's used is the same BCL code, like HttpWebRequest, that Mono 2.10.x uses. You *could* use iOS API to do the same but if you use .NET API then it's the .NET code that will be executed.

<span class="quote">&gt; So that's certainly a major differnce to an app running on Mono.</span>

No, what I executed (for my test) was the identical to the latest Mono 2.10.12 code.


I just tested your own Mono sample with Mono 2.10.12 (the latest available on the Mac) and 2.10.9 and they both work like I expect (sending a TLS ClientHello) when I add:

        ServicePointManager.SecurityProtocol = SecurityProtocolType.Tls;

while it sends an SSL ClientHello when I use:

        ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;

Since the ClientHello message is sent before contacting (or knowing anything about) the server then your server software/host/configuration should not matter at all.

There might be some Mac-specific configuration I'm not aware of. I doubt it but I'll look at it.


@Jonp: can you try the sample on something else than a Mac ? once with each line (Tls and Ssl3). It can connect to any TLS server since only the initial message is interesting. And please attach the network traces. Thanks :)</pre>
    </div>

    <div id="c13" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c13">Comment 13</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-07 08:21:13 UTC
        </span>

      </div>




<pre class="bz_comment_text">I've already tested setting the security protocol on Xamarin.Android - error message wise there was no change whatsoever. I've also looked at Wireshark - same thing there... Wireshark shows ClientHello as SSL, not TLSv1.

And my tests from Android are against a different OS than those from Windows... it's Xamarin 4.6.49 (client) =&gt; Win8 (server), and Win8 (client running both latest release and beta version of Mono) =&gt; Win2008R2 (server).

I still can't shake the feeling we're not testing the same.. I mean, at some point .NET code gets translated to native platform calls... and they are different on IOS, Mac, Windows and Android, are they not? (plus on Android it's not really native ARM code that's being generated as far as I understand.. otherwise there'd be no point of having a Mono runtime for Android)

I've also tested the reverse way... client on win2008R2, server in win8... same story there. For a "regular" webserver (say <a href="https://www.google.com">https://www.google.com</a>), setting ServicePointManager.SecurityProtocol works - I either see TLSv1 in Wireshark, or SSL3. But when I connect to the server I've provided, Wireshark shows SSL regardless of ServicePointManager.SecurityProtocol settings and things don't work.

I don't think you'll get around actually running my repro server and test with it. I've also tested against IISv7 running on the local network and it works as advertised there too so the problem seems limited to self-hosted .NET webservers.</pre>
    </div>

    <div id="c14" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c14">Comment 14</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-07 08:31:02 UTC
        </span>

      </div>




<pre class="bz_comment_text">One more thing - 

ServicePointManager.SecurityProtocol = SecurityProtocolType.Ssl3;

using .NET runtime doesn't work against my repro server - so httpd.sys seems to insist on TLS.
Browsers seen to handle that just fine, but Mono doesn't.</pre>
    </div>

    <div id="c15" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c15">Comment 15</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sebastien Pouliot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-08 09:43:08 UTC
        </span>

      </div>




<pre class="bz_comment_text"><span class="quote">&gt; and they are different on IOS, Mac, Windows and Android, are they not?</span>

No, it's the same code down to sockets. IOW all the SSL/TLS and HTTP (HttpWebRequest and friends) code is identical on every platforms.

<span class="quote">&gt; plus on Android it's not really native ARM code </span>

On Android the .NET code is JIT'ed into native ARM code (just like Mono or .NET would JIT to x86 or x86_64 on your computer) but that does not change anything wrt this bug report.

<span class="quote">&gt; setting ServicePointManager.SecurityProtocol works - I either see TLSv1 in Wireshark,</span>

That's fine (and expected).

<span class="quote">&gt; But when I connect to the server I've provided, Wireshark shows SSL</span>

That should not be possible, something else must be wrong. The SSL or TLS ClientHello decision is based on the `ServicePointManager.SecurityProtocol` value *before* contacting the server. That can be seen in the network trace (and also in the source code and the RFC describing SSL/TLS).

IOW even if a simple socket server (no HTTP nor SSL) was used you would see the same protocol initiation from the client. 

<span class="quote">&gt; I don't think you'll get around actually running my repro server</span>

No, as long as the ClientHello does not match what we expect the server is totally out of the equation.


Using your own project w/ServicePointManager.SecurityProtocol set to Tls1, try the following command:

    mono --trace=N:System.Net MonoHttpWebRequest.exe &gt; log

and attach the `log` file to this bug report.</pre>
    </div>

    <div id="c16" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c16">Comment 16</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-08 10:21:34 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="https://bugzilla.xamarin.com/attachment.cgi?id=3770&amp;file=log" name="attach_3770" title="mono traces as requested">attachment 3770</a> <a href="https://bugzilla.xamarin.com/attachment.cgi?id=3770&amp;file=log" title="mono traces as requested">[details]</a></span>
mono traces as requested

taken with mono 3.0.6</pre>
    </div>

    <div id="c17" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c17">Comment 17</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Stephan Steiner</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-04-08 15:47:46 UTC
        </span>

      </div>




<pre class="bz_comment_text">Just tried on another client/server combo. Client running on Win7, server on Win2008R2 - results are the same again.</pre>
    </div>

    <div id="c18" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c18">Comment 18</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Janusz Nykiel</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-06-05 08:14:15 UTC
        </span>

      </div>




<pre class="bz_comment_text">Self-signed cert generated with OpenSSL works (ServerCertificateValidationCallback does get called, and if I don't specify one, the exception speaks of a certificate validation error, not IOException in BeginWrite). One generated with makecert.exe doesn't. I'm attaching both. They differ in:
- X509 version - makecert is V3, openssl is V1,
- DN - the one I've made with makecert has just CN, but I've filled all the details in the openssl one,
- expiration date - makecert's is in 2040, openssl's is in 2014.
One of these things is tripping up Mono's SSL/TLS implementation horribly.</pre>
    </div>

    <div id="c19" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c19">Comment 19</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Janusz Nykiel</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-06-05 08:16:04 UTC
        </span>

      </div>




<pre class="bz_comment_text">Created <span class=""><a href="https://bugzilla.xamarin.com/attachment.cgi?id=4071&amp;file=certs%20made%20with%20makecert%20and%20openssl.zip" name="attach_4071" title="certificates for repro; made-with-openssl works; made-with-makecert doesn't">attachment 4071</a> <a href="https://bugzilla.xamarin.com/attachment.cgi?id=4071&amp;file=certs%20made%20with%20makecert%20and%20openssl.zip" title="certificates for repro; made-with-openssl works; made-with-makecert doesn't">[details]</a></span>
certificates for repro; made-with-openssl works; made-with-makecert doesn't</pre>
    </div>

    <div id="c20" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c20">Comment 20</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Sebastien Pouliot</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-06-05 08:22:30 UTC
        </span>

      </div>




<pre class="bz_comment_text">Janusz, that's unrelated to the original bug description. Please open a separate bug report for different issues.</pre>
    </div>

    <div id="c21" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c21">Comment 21</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Janusz Nykiel</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-06-05 08:42:19 UTC
        </span>

      </div>




<pre class="bz_comment_text">I'm sorry I wasn't more specific with my comment. The discussion went off a tangent about the details of how Mono works on mobile devices but the original problem is still the occurrence of WebException with the message "Error getting response stream (Write: BeginWrite failure): SendFailure" when connecting by HttpWebRequest to a HTTPS server that uses a self-signed certificate. I encountered the same problem (same Wireshark traces, ServerCertificateValidationCallback not even being called etc.). I've narrowed down the cause of the problem to be the self-signed certificate used. When the HTTP server (IIS8 in my case) uses a certificate made with the makecert.exe tool (first choice for Windows developers, works with any other HTTP client), the problem occurs. When the HTTP server uses a certificate made with openssl, the problem doesn't occur. I've detailed how they differ in the previous comment. Since it's platform independent (tested with Xamarin.Android and Mono on Windows) the problem seems to lie with Mono SSL/TLS implementation in general.</pre>
    </div>

    <div id="c22" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c22">Comment 22</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Janusz Nykiel</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2013-06-05 08:43:34 UTC
        </span>

      </div>




<pre class="bz_comment_text">Comment on <span class=""><a href="https://bugzilla.xamarin.com/attachment.cgi?id=4071&amp;file=certs%20made%20with%20makecert%20and%20openssl.zip" name="attach_4071" title="certificates for repro; made-with-openssl works; made-with-makecert doesn't">attachment 4071</a> <a href="https://bugzilla.xamarin.com/attachment.cgi?id=4071&amp;file=certs%20made%20with%20makecert%20and%20openssl.zip" title="certificates for repro; made-with-openssl works; made-with-makecert doesn't">[details]</a></span>
certificates for repro; made-with-openssl works; made-with-makecert doesn't

password is 'robocze'</pre>
    </div>

    <div id="c23" class="bz_comment">

      <div class="bz_comment_head">


        <span class="bz_comment_number">
          <a href="#c23">Comment 23</a>
        </span>

        <span class="bz_comment_user">
          <span class="vcard"><span class="fn">Johannes Rudolph</span>
</span>
        </span>

        <span class="bz_comment_user_images">
        </span>

        <span class="bz_comment_time">
          2015-01-21 02:09:45 UTC
        </span>

      </div>




<pre class="bz_comment_text">Has any progress been made on this? We are experiencing similar, occassional problems connecting to https services using HttpWebRequest ("BeginWrite failure") on Xamarin.Android. 

As far as I can see Stephan has submitted all required info for reproducing this, still the bug is in the "NEEDSINFO" state.</pre>
    </div>




</td>
<td>
</td>
</tr></tbody></table>
  </div>


</form>

<hr>


<br>
</div>

    

  
</body></html>